"use strict";var Socketizer=Socketizer||{};Socketizer.main=function(e){var t=false;var o="192.168.1.3:8080";var n="ws://"+o+"/service/wordpress/live/"+socketizer.host;var a={};a.attempts=1;var r={};r.connected=false;r.init=function(){a.healthyClose();a.check();a.connect()};a.healthyClose=function(){window.onbeforeunload=function(){if(r.connected){a.socket.close(1e3)}}};a.check=function(){if(window.WebSocket){t=true}else{r.connected="Socketizer: Please update to a modern web browser"}};a.connect=function(){if(t){a.socket=new WebSocket(n);a.socket.onopen=function(){r.connected=true};a.socket.onmessage=function(e){a.receive(e)};a.socket.onclose=function(){r.connected=false;a.close()}}};a.close=function(){var e=a.generateInterval(a.attempts);setTimeout(function(){a.attempts++;a.connect()},e)};a.generateInterval=function(e){var t=(Math.pow(2,e)-1)*1e3;if(t>30*1e3){t=30*1e3}return Math.random()*t};a.smallInterval=function(){return Math.random(1,1500)};a.receive=function(t){var o=JSON.parse(t.data);var n=socketizer.postsPage;var r=window.location.href;var s;if(o.hasOwnProperty("Data")){if(o.Data.hasOwnProperty("cmd")){if(o.Data.cmd==="refreshPost"){s=o.Data.postUrl;var c=o.Data.pageForPosts;var i=c.replace(/^https?:\/\//,"")===o.Data.host;var l="#post-"+o.Data.postId;var f=e(l).length===1;r=r.split("#comment-")[0];if(o.Data.what==="comment"){if(s===r&&f){setTimeout(function(){e("body").load(s)},a.smallInterval());return false}}else if(o.Data.what==="product"){l="#product-"+o.Data.postId;f=e(l).length===1;if(s===r&&f){setTimeout(function(){e("body").load(s)},a.smallInterval());return false}}else if(o.Data.what==="post"){if(s===r&&f){setTimeout(function(){e("body").load(s)},a.smallInterval());return false}else if(r===n&&f){setTimeout(function(){e("body").load(socketizer.postsPage)},a.smallInterval());return false}else if(i&&f){setTimeout(function(){e("body").load(c)},a.smallInterval());return false}}}}}};return r}(jQuery);document.addEventListener("DOMContentLoaded",Socketizer.main.init);