"use strict";var Socketizer=Socketizer||{};Socketizer.main=function(e){var t=false;var n="192.168.1.3:8080";var o="ws://"+n+"/service/wordpress/live/"+socketizer.host;var a={};a.attempts=1;var r={};r.connected=false;r.init=function(){a.healthyClose();a.check();a.connect()};a.healthyClose=function(){window.onbeforeunload=function(){if(r.connected){a.socket.close(1e3)}}};a.check=function(){if(window.WebSocket){t=true}else{r.connected="Socketizer: Please update to a modern web browser"}};a.connect=function(){if(t){a.socket=new WebSocket(o);a.socket.onopen=function(){r.connected=true};a.socket.onmessage=function(e){a.receive(e)};a.socket.onclose=function(){r.connected=false;a.close()}}};a.close=function(){var e=a.generateInterval(a.attempts);setTimeout(function(){a.attempts++;a.connect()},e)};a.generateInterval=function(e){var t=(Math.pow(2,e)-1)*1e3;if(t>30*1e3){t=30*1e3}return Math.random()*t};a.smallInterval=function(){return Math.random(1,1500)};a.receive=function(t){var n=JSON.parse(t.data);var o=socketizer.postsPage;var r=window.location.href;var c;if(n.hasOwnProperty("Data")){if(n.Data.hasOwnProperty("cmd")){if(n.Data.cmd==="refreshPost"){c=n.Data.postUrl;var s=n.Data.pageForPosts;var i=s.replace(/^https?:\/\//,"")===n.Data.host;var l="#post-"+n.Data.postId;var f=e(l).length===1;var u=false;r=r.split("#comment-")[0];if(n.Data.commentUrl!==""){u=true}if(u){if(c===r&&f){setTimeout(function(){e("body").load(c)},a.smallInterval());return false}}else{if(c===r&&f){setTimeout(function(){e("body").load(c)},a.smallInterval());return false}else if(r===o&&f){setTimeout(function(){e("body").load(socketizer.postsPage)},a.smallInterval());return false}else if(i&&f){setTimeout(function(){e("body").load(s)},a.smallInterval());return false}}}}}};return r}(jQuery);document.addEventListener("DOMContentLoaded",Socketizer.main.init);